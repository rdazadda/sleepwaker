<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Inverting Sleep and Wake Periods from Accelerometry Data — sleepwaker • sleepwaker</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Inverting Sleep and Wake Periods from Accelerometry Data — sleepwaker"><meta name="description" content="Converts between sleep and wake periods from accelerometry batch export data.
Uses output from validated sleep detection algorithms (Cole-Kripke (Adult), Sadeh (Youth))
to invert sleep periods into wake periods, which enables analysis constrained to
waking hours and prevents artificial inflation of sedentary time estimates."><meta property="og:description" content="Converts between sleep and wake periods from accelerometry batch export data.
Uses output from validated sleep detection algorithms (Cole-Kripke (Adult), Sadeh (Youth))
to invert sleep periods into wake periods, which enables analysis constrained to
waking hours and prevents artificial inflation of sedentary time estimates."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sleepwaker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rdazadda/sleepwaker"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Inverting Sleep and Wake Periods from Accelerometry Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/rdazadda/sleepwaker/blob/master/R/sleepwaker.R" class="external-link"><code>R/sleepwaker.R</code></a></small>
      <div class="d-none name"><code>sleepwaker.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts between sleep and wake periods from accelerometry batch export data.
Uses output from validated sleep detection algorithms (Cole-Kripke (Adult), Sadeh (Youth))
to invert sleep periods into wake periods, which enables analysis constrained to
waking hours and prevents artificial inflation of sedentary time estimates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sleepwaker</span><span class="op">(</span><span class="va">data</span>, input.type <span class="op">=</span> <span class="st">"raw"</span>, output.type <span class="op">=</span> <span class="st">"sleep"</span>, output.file <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame contains either batch sleep export data with columns
'Subject Name', 'In Bed Time', 'Out Bed Time', or already formatted sleep/wake
periods with columns 'Subject Name', 'On Date', 'On Time', 'Off Date',
'Off Time', 'Category'.</p></dd>


<dt id="arg-input-type">input.type<a class="anchor" aria-label="anchor" href="#arg-input-type"></a></dt>
<dd><p>Character string which specify the input data type: "raw" for batch
export, "sleep" for formatted sleep periods, or "wake" for formatted wake periods.</p></dd>


<dt id="arg-output-type">output.type<a class="anchor" aria-label="anchor" href="#arg-output-type"></a></dt>
<dd><p>Character string which specify desired output: "sleep" for sleep
periods or "wake" for wake periods.</p></dd>


<dt id="arg-output-file">output.file<a class="anchor" aria-label="anchor" href="#arg-output-file"></a></dt>
<dd><p>This is Optional character string which specify CSV file path for saving
results. If NULL (default), results are returned but not saved to file.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame with columns 'Subject Name', 'On Date', 'On Time', 'Off Date',
'Off Time', and 'Category', representing either sleep or wake periods as specified.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The inversion algorithm or let me say  pairs consecutive periods, using the end time of period N
as the start of the inverted period, and the start time of period N+1 as the end.
This creates complement periods between consecutive sleep or wake episodes.
Note that the output contains one fewer period per subject than the input, as the
final period cannot be inverted without a subsequent period.</p>
<p>Wake to sleep conversion is blocked as it results in compounded data loss and
cannot recover original sleep periods.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cole, R. J., Kripke, D. F., Gruen, W., Mullaney, D. J., &amp; Gillin, J. C. (1992). Automatic sleep/wake identification from wrist activity. Sleep, 15(5), 461–469. https://doi.org/10.1093/sleep/15.5.461</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create sample batch export data</span></span></span>
<span class="r-in"><span><span class="va">batch_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Subject Name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S001"</span>, <span class="st">"S001"</span>, <span class="st">"S002"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"In Bed Time"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"09/19/2024 11:00:00 PM"</span>, <span class="st">"09/20/2024 10:30:00 PM"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"09/19/2024 11:15:00 PM"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Out Bed Time"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"09/20/2024 07:00:00 AM"</span>, <span class="st">"09/21/2024 06:45:00 AM"</span>,</span></span>
<span class="r-in"><span>                     <span class="st">"09/20/2024 07:30:00 AM"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert raw data to sleep periods</span></span></span>
<span class="r-in"><span><span class="va">sleep_periods</span> <span class="op">&lt;-</span> <span class="fu">sleepwaker</span><span class="op">(</span><span class="va">batch_data</span>, input.type <span class="op">=</span> <span class="st">"raw"</span>,</span></span>
<span class="r-in"><span>                            output.type <span class="op">=</span> <span class="st">"sleep"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert raw data to wake periods</span></span></span>
<span class="r-in"><span><span class="va">wake_periods</span> <span class="op">&lt;-</span> <span class="fu">sleepwaker</span><span class="op">(</span><span class="va">batch_data</span>, input.type <span class="op">=</span> <span class="st">"raw"</span>,</span></span>
<span class="r-in"><span>                           output.type <span class="op">=</span> <span class="st">"wake"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Subject S002 has fewer than 2 periods. Skipping.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert sleep periods to wake periods</span></span></span>
<span class="r-in"><span><span class="va">wake_from_sleep</span> <span class="op">&lt;-</span> <span class="fu">sleepwaker</span><span class="op">(</span><span class="va">sleep_periods</span>, input.type <span class="op">=</span> <span class="st">"sleep"</span>,</span></span>
<span class="r-in"><span>                              output.type <span class="op">=</span> <span class="st">"wake"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Subject S002 has fewer than 2 periods. Skipping.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Save results to CSV file</span></span></span>
<span class="r-in"><span><span class="va">wake_periods</span> <span class="op">&lt;-</span> <span class="fu">sleepwaker</span><span class="op">(</span><span class="va">batch_data</span>, input.type <span class="op">=</span> <span class="st">"raw"</span>,</span></span>
<span class="r-in"><span>                           output.type <span class="op">=</span> <span class="st">"wake"</span>,</span></span>
<span class="r-in"><span>                           output.file <span class="op">=</span> <span class="st">"wake_periods.csv"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Subject S002 has fewer than 2 periods. Skipping.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Results saved to: wake_periods.csv</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raymond Dacosta Azadda, Andrew Grogan-Kaylor, KyungSook Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

